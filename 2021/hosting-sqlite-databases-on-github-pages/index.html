<!DOCTYPE html><html><head><meta charSet="utf-8" data-next-head=""/><title data-next-head="">Hosting SQLite databases on Github Pages - (or IPFS or any static file hoster) - phiresky&#x27;s blog</title><meta name="description" content="I was writing a tiny website to display statistics of how much sponsored content a Youtube creator has over time when I noticed that I often write a small tool as a website that queries some data from a database and then displays it in a graph, a table, or similar. But if you want to use a" data-next-head=""/><meta name="viewport" content="width=device-width, initial-scale=1" data-next-head=""/><link rel="alternate" type="application/rss+xml" title="RSS feed of phiresky&#x27;s blog" href="https://phiresky.github.io/blog/rss.xml" data-next-head=""/><link rel="alternate" type="application/atom+xml" title="Atom feed of phiresky&#x27;s blog" href="https://phiresky.github.io/blog/atom.xml" data-next-head=""/><link rel="alternate" type="application/json" title="JSON feed of phiresky&#x27;s blog" href="https://phiresky.github.io/blog/feed.json" data-next-head=""/><style data-next-head="">
          body {
            font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;
          }
      </style><link rel="preload" href="/blog/_next/static/css/176ecc217408b6d5.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/176ecc217408b6d5.css" data-n-g=""/><link rel="preload" href="/blog/_next/static/css/ca399fb16b1ff7a4.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/ca399fb16b1ff7a4.css" data-n-p=""/><link rel="preload" href="/blog/_next/static/css/294dd07620d1a861.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/294dd07620d1a861.css"/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/blog/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script defer="" src="/blog/_next/static/chunks/c78d26b1.b196d3f3d3e19b14.js"></script><script defer="" src="/blog/_next/static/chunks/ff27826a.71f4247118f261da.js"></script><script defer="" src="/blog/_next/static/chunks/d9daaaae.d40d0f92a410a1b0.js"></script><script defer="" src="/blog/_next/static/chunks/412.9e1cfda0a6a223da.js"></script><script defer="" src="/blog/_next/static/chunks/19.dbd7f8168636f3de.js"></script><script defer="" src="/blog/_next/static/chunks/615.3e175af2530fce15.js"></script><script src="/blog/_next/static/chunks/webpack-b71e6f5e83c3e25f.js" defer=""></script><script src="/blog/_next/static/chunks/framework-dd2475e04127183a.js" defer=""></script><script src="/blog/_next/static/chunks/main-dded5530337538c6.js" defer=""></script><script src="/blog/_next/static/chunks/pages/_app-4690c3d9b8989c63.js" defer=""></script><script src="/blog/_next/static/chunks/768-97507726c6ad4e38.js" defer=""></script><script src="/blog/_next/static/chunks/767-8dd3b40e4e29c204.js" defer=""></script><script src="/blog/_next/static/chunks/pages/%5Byear%5D/%5Bpost%5D-7f75829a52186db8.js" defer=""></script><script src="/blog/_next/static/1duOVj8IRBQqX-jGqm5oV/_buildManifest.js" defer=""></script><script src="/blog/_next/static/1duOVj8IRBQqX-jGqm5oV/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div><div><main class="lh-copy"><div class="relative tc bg-dark-gray"><div class="mw7 center white"><div class="pv4"><h1 class="f2 normal lh-title ma0 pa0"><a class="white no-underline" href="/blog/">phiresky&#x27;s blog</a></h1><h4 class="normal o-70 ma0 pt2 pb3 ph1">Code, Craft, and Creativity</h4><div><a class="dib f6 white no-underline pa1 ma1" href="/blog/">Blog</a><a href="https://github.com/phiresky/" class="dib f6 white no-underline pa1 ma1">GitHub</a></div></div></div></div><div class="content center mw7 pa3 pa4-ns"><h1 class="mt0 lh-title mb1">Hosting SQLite databases on Github Pages</h1><p class="mt0">(or IPFS or any static file hoster)</p><small class="db ttu o-40"><time dateTime="2021-04-17T00:00:00.000Z">Apr 17, 2021</time> • <a href="https://github.com/phiresky/blog/commits/master/posts/2021/hosting-sqlite-databases-on-github-pages.md">Last Update <time dateTime="2021-04-17T00:00:00.000Z">Jun 04, 2023</time></a></small><p>I was writing <a href="https://phiresky.github.io/youtube-sponsorship-stats/?uploader=Adam+Ragusea">a tiny website</a> to display statistics of how much sponsored content a Youtube creator has over time when I noticed that I often write a small tool as a website that queries some data from a database and then displays it in a graph, a table, or similar. But if you want to use a database, you either need to write a backend (which you then need to host and maintain forever) or download the whole dataset into the browser (which is not so great when the dataset is more than 10MB).</p><p>In the past when I’ve used a backend server for these small side projects at some point some external API goes down or a key expires or I forget about the backend and stop paying for whatever VPS it was on. Then when I revisit it years later, I’m annoyed that it’s gone and curse myself for relying on an external service - or on myself caring over a longer period of time.</p><p>Hosting a static website is much easier than a <span class="quoted">&quot;<!-- -->real<!-- -->&quot;</span> server - there’s many free and reliable options (like GitHub, GitLab Pages, Netlify, etc), and it scales to basically infinity without any effort.</p><p>So I wrote a tool to be able to use a real SQL database in a statically hosted website!</p><p>Here’s a demo using the <a href="https://github.com/phiresky/world-development-indicators-sqlite/">World Development Indicators dataset</a> - a dataset with 6 tables and over 8 million rows (670 MiByte total).</p><div class="sqlite-httpvfs-demo"><div class="box-title">Demo</div><div class="with-inner-title"><div class="inner-title"><div>Input <!-- -->SQL</div><div role="button" class="floatright"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="keyboard" class="svg-inline--fa fa-keyboard fa-sm " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M64 64C28.7 64 0 92.7 0 128L0 384c0 35.3 28.7 64 64 64l448 0c35.3 0 64-28.7 64-64l0-256c0-35.3-28.7-64-64-64L64 64zm16 64l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM64 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zm80-176c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM160 336c0-8.8 7.2-16 16-16l224 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-224 0c-8.8 0-16-7.2-16-16l0-32zM272 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM256 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM368 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM352 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM464 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM448 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16z"></path></svg> Edit</div></div><div class="inner-body"><pre class="inner-body" style="color:#ccc;background:#2d2d2d;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-sql" style="white-space:pre;color:#ccc;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token token" style="color:#cc99cd">select</span><span> country_code</span><span class="token token" style="color:#ccc">,</span><span> long_name </span><span class="token token" style="color:#cc99cd">from</span><span> wdi_country </span><span class="token token" style="color:#cc99cd">limit</span><span> </span><span class="token token" style="color:#f08d49">3</span><span class="token token" style="color:#ccc">;</span></span></code></pre></div></div><div class="with-inner-title hanging"><div class="inner-title"><div role="button"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="play" class="svg-inline--fa fa-play fa-sm " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"></path></svg> Run</div></div><div style="padding-bottom:1ex"></div></div></div><p>As you can see, we can query the <code class="not-highlighted">wdi_country</code> table while fetching only 1kB of data!</p><p>This is a full SQLite query engine. As such, we can use e.g. the <a href="https://www.sqlite.org/json1.html">SQLite JSON functions</a>:</p><div class="sqlite-httpvfs-demo"><div class="box-title">Demo</div><div class="with-inner-title"><div class="inner-title"><div>Input <!-- -->SQL</div><div role="button" class="floatright"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="keyboard" class="svg-inline--fa fa-keyboard fa-sm " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M64 64C28.7 64 0 92.7 0 128L0 384c0 35.3 28.7 64 64 64l448 0c35.3 0 64-28.7 64-64l0-256c0-35.3-28.7-64-64-64L64 64zm16 64l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM64 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zm80-176c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM160 336c0-8.8 7.2-16 16-16l224 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-224 0c-8.8 0-16-7.2-16-16l0-32zM272 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM256 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM368 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM352 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM464 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM448 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16z"></path></svg> Edit</div></div><div class="inner-body"><pre class="inner-body" style="color:#ccc;background:#2d2d2d;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-sql" style="white-space:pre;color:#ccc;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token token" style="color:#cc99cd">select</span><span> json_extract</span><span class="token token" style="color:#ccc">(</span><span>arr</span><span class="token token" style="color:#ccc">.</span><span class="token token" style="color:#cc99cd">value</span><span class="token token" style="color:#ccc">,</span><span> </span><span class="token token" style="color:#7ec699">&#x27;$.foo.bar&#x27;</span><span class="token token" style="color:#ccc">)</span><span> </span><span class="token token" style="color:#cc99cd">as</span><span> bar
</span></span><span><span>  </span><span class="token token" style="color:#cc99cd">from</span><span> json_each</span><span class="token token" style="color:#ccc">(</span><span class="token token" style="color:#7ec699">&#x27;[{&quot;foo&quot;: {&quot;bar&quot;: 123}}, {&quot;foo&quot;: {&quot;bar&quot;: &quot;baz&quot;}}]&#x27;</span><span class="token token" style="color:#ccc">)</span><span> </span><span class="token token" style="color:#cc99cd">as</span><span> arr</span></span></code></pre></div></div><div class="with-inner-title hanging"><div class="inner-title"><div role="button"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="play" class="svg-inline--fa fa-play fa-sm " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"></path></svg> Run</div></div><div style="padding-bottom:1ex"></div></div></div><p>We can also register JS functions so they can be called from within a query. Here’s an example with a <code class="not-highlighted">getFlag</code> function that gets the flag emoji for a country:</p><div class="sqlite-httpvfs-demo"><div class="box-title">JS <!-- -->Demo</div><div class="with-inner-title"><div class="inner-title"><div>Input <!-- -->JavaScript</div><div role="button" class="floatright"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="keyboard" class="svg-inline--fa fa-keyboard fa-sm " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M64 64C28.7 64 0 92.7 0 128L0 384c0 35.3 28.7 64 64 64l448 0c35.3 0 64-28.7 64-64l0-256c0-35.3-28.7-64-64-64L64 64zm16 64l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM64 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zm80-176c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM160 336c0-8.8 7.2-16 16-16l224 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-224 0c-8.8 0-16-7.2-16-16l0-32zM272 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM256 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM368 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM352 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM464 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM448 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16z"></path></svg> Edit</div></div><div class="inner-body"><pre class="inner-body" style="color:#ccc;background:#2d2d2d;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-typescript" style="white-space:pre;color:#ccc;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token token" style="color:#cc99cd">function</span><span> </span><span class="token token" style="color:#f08d49">getFlag</span><span class="token token" style="color:#ccc">(</span><span>country_code</span><span class="token token" style="color:#ccc">)</span><span> </span><span class="token token" style="color:#ccc">{</span><span>
</span></span><span><span>  </span><span class="token token" style="color:#999">// just some unicode magic</span><span>
</span></span><span><span>  </span><span class="token token control-flow" style="color:#cc99cd">return</span><span> </span><span class="token token known-class-name" style="color:#f8c555">String</span><span class="token token" style="color:#ccc">.</span><span class="token token method property-access" style="color:#f08d49">fromCodePoint</span><span class="token token" style="color:#ccc">(</span><span class="token token spread" style="color:#67cdcc">...</span><span class="token token known-class-name" style="color:#f8c555">Array</span><span class="token token" style="color:#ccc">.</span><span class="token token module" style="color:#cc99cd">from</span><span class="token token" style="color:#ccc">(</span><span>country_code</span><span class="token token" style="color:#67cdcc">||</span><span class="token token" style="color:#7ec699">&quot;&quot;</span><span class="token token" style="color:#ccc">)</span><span>
</span></span><span><span>    </span><span class="token token" style="color:#ccc">.</span><span class="token token method property-access" style="color:#f08d49">map</span><span class="token token" style="color:#ccc">(</span><span>c </span><span class="token token arrow" style="color:#67cdcc">=&gt;</span><span> </span><span class="token token" style="color:#f08d49">127397</span><span> </span><span class="token token" style="color:#67cdcc">+</span><span> c</span><span class="token token" style="color:#ccc">.</span><span class="token token method property-access" style="color:#f08d49">codePointAt</span><span class="token token" style="color:#ccc">(</span><span class="token token" style="color:#ccc">)</span><span class="token token" style="color:#ccc">)</span><span class="token token" style="color:#ccc">)</span><span class="token token" style="color:#ccc">;</span><span>
</span></span><span><span></span><span class="token token" style="color:#ccc">}</span><span>
</span></span><span>
</span><span><span></span><span class="token token control-flow" style="color:#cc99cd">await</span><span> db</span><span class="token token" style="color:#ccc">.</span><span class="token token method property-access" style="color:#f08d49">create_function</span><span class="token token" style="color:#ccc">(</span><span class="token token" style="color:#7ec699">&quot;get_flag&quot;</span><span class="token token" style="color:#ccc">,</span><span> getFlag</span><span class="token token" style="color:#ccc">)</span><span>
</span></span><span><span></span><span class="token token control-flow" style="color:#cc99cd">return</span><span> </span><span class="token token control-flow" style="color:#cc99cd">await</span><span> db</span><span class="token token" style="color:#ccc">.</span><span class="token token method property-access" style="color:#f08d49">query</span><span class="token token" style="color:#ccc">(</span><span class="token token template-string template-punctuation" style="color:#7ec699">`</span><span class="token token template-string" style="color:#7ec699">
</span></span><span class="token token template-string" style="color:#7ec699">  select long_name, get_flag(&quot;2-alpha_code&quot;) as flag from wdi_country
</span><span class="token token template-string" style="color:#7ec699">    where region is not null and currency_unit = &#x27;Euro&#x27;;
</span><span><span class="token token template-string" style="color:#7ec699"></span><span class="token token template-string template-punctuation" style="color:#7ec699">`</span><span class="token token" style="color:#ccc">)</span></span></code></pre></div></div><div class="with-inner-title hanging"><div class="inner-title"><div role="button"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="play" class="svg-inline--fa fa-play fa-sm " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"></path></svg> Run</div></div><div style="padding-bottom:1ex"></div></div></div><div class="flex items-center justify-center ph3 bg-lightest-blue navy"><p><span class="lh-title">Press the Run button to run the following demos. You can change the code in any way you like, though if you make a query too broad it <em>will</em> fetch large amounts of data ;)</span></p></div><p>Note that this website is 100% hosted on a static file hoster (GitHub Pages).</p><p>So how do you use a database on a static file hoster? Firstly, SQLite (written in C) is compiled to WebAssembly. SQLite can be compiled with <a href="https://emscripten.org/">emscripten</a> without any modifications, and the <a href="https://github.com/sql-js/sql.js/">sql.js</a> library is a thin JS wrapper around the wasm code.</p><p>sql.js only allows you to create and read from databases that are fully in memory though - so I implemented a virtual file system that fetches chunks of the database with HTTP Range requests when SQLite tries to read from the filesystem: <a href="https://github.com/phiresky/sql.js-httpvfs">sql.js-httpvfs</a>. From SQLite’s perspective, it just looks like it’s living on a normal computer with an empty filesystem except for a file called <code class="not-highlighted">/wdi.sqlite3</code> that it can read from. Of course it can’t write to this file, but a read-only database is still very useful.</p><p>Since fetching data via HTTP has a pretty large overhead, we need to fetch data in chunks and find some balance between the number of requests and the used bandwidth. Thankfully, SQLite already organizes its database in <span class="quoted">&quot;<!-- -->pages<!-- -->&quot;</span> with a user-defined <a href="https://www.sqlite.org/pgszchng2016.html">page size</a> (4 KiB by default). I’ve set the page size to 1 KiB for this database.</p><p>Here’s an example of a simple index lookup query:</p><div class="sqlite-httpvfs-demo"><div class="box-title">Demo</div><div class="with-inner-title"><div class="inner-title"><div>Input <!-- -->SQL</div><div role="button" class="floatright"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="keyboard" class="svg-inline--fa fa-keyboard fa-sm " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M64 64C28.7 64 0 92.7 0 128L0 384c0 35.3 28.7 64 64 64l448 0c35.3 0 64-28.7 64-64l0-256c0-35.3-28.7-64-64-64L64 64zm16 64l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM64 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zm80-176c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM160 336c0-8.8 7.2-16 16-16l224 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-224 0c-8.8 0-16-7.2-16-16l0-32zM272 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM256 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM368 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM352 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM464 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM448 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16z"></path></svg> Edit</div></div><div class="inner-body"><pre class="inner-body" style="color:#ccc;background:#2d2d2d;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-sql" style="white-space:pre;color:#ccc;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token token" style="color:#cc99cd">select</span><span> indicator_code</span><span class="token token" style="color:#ccc">,</span><span> long_definition </span><span class="token token" style="color:#cc99cd">from</span><span> wdi_series </span><span class="token token" style="color:#cc99cd">where</span><span> indicator_name
</span></span><span><span>    </span><span class="token token" style="color:#67cdcc">=</span><span> </span><span class="token token" style="color:#7ec699">&#x27;Literacy rate, youth total (% of people ages 15-24)&#x27;</span></span></code></pre></div></div><div class="with-inner-title hanging"><div class="inner-title"><div role="button"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="play" class="svg-inline--fa fa-play fa-sm " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"></path></svg> Run</div></div><div style="padding-bottom:1ex"></div></div></div><p>Run the above query and look at the page read log. SQLite does 7 page reads for that query.</p><ul><li>Three page reads are just some to get some schema information (these are already cached)</li><li>Two page reads are the index lookup in the index <code class="not-highlighted">on wdi_series (indicator_name)</code></li><li>Two page reads are on the <code class="not-highlighted">wdi_series</code> table data (the first to find the row value by primary key, the second to get the text data from an <a href="https://www.sqlite.org/fileformat2.html#ovflpgs">overflow page</a>)</li></ul><p>Both the index as well as the table reads are B-Tree lookups.</p><p>A more complex query: What are the countries with the lowest youth literacy rate, based on the newest data from after 2010?</p><div class="sqlite-httpvfs-demo"><div class="box-title">Demo</div><div class="with-inner-title"><div class="inner-title"><div>Input <!-- -->SQL</div><div role="button" class="floatright"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="keyboard" class="svg-inline--fa fa-keyboard fa-sm " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M64 64C28.7 64 0 92.7 0 128L0 384c0 35.3 28.7 64 64 64l448 0c35.3 0 64-28.7 64-64l0-256c0-35.3-28.7-64-64-64L64 64zm16 64l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM64 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zm80-176c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM160 336c0-8.8 7.2-16 16-16l224 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-224 0c-8.8 0-16-7.2-16-16l0-32zM272 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM256 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM368 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM352 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM464 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM448 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16z"></path></svg> Edit</div></div><div class="inner-body"><pre class="inner-body" style="color:#ccc;background:#2d2d2d;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-sql" style="white-space:pre;color:#ccc;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token token" style="color:#cc99cd">with</span><span> newest_datapoints </span><span class="token token" style="color:#cc99cd">as</span><span> </span><span class="token token" style="color:#ccc">(</span><span>
</span></span><span><span>  </span><span class="token token" style="color:#cc99cd">select</span><span> country_code</span><span class="token token" style="color:#ccc">,</span><span> indicator_code</span><span class="token token" style="color:#ccc">,</span><span> </span><span class="token token" style="color:#f08d49">max</span><span class="token token" style="color:#ccc">(</span><span class="token token" style="color:#cc99cd">year</span><span class="token token" style="color:#ccc">)</span><span> </span><span class="token token" style="color:#cc99cd">as</span><span> </span><span class="token token" style="color:#cc99cd">year</span><span> </span><span class="token token" style="color:#cc99cd">from</span><span> wdi_data
</span></span><span><span>  </span><span class="token token" style="color:#cc99cd">join</span><span> wdi_series </span><span class="token token" style="color:#cc99cd">using</span><span> </span><span class="token token" style="color:#ccc">(</span><span>indicator_code</span><span class="token token" style="color:#ccc">)</span><span>
</span></span><span><span>  </span><span class="token token" style="color:#cc99cd">where</span><span>
</span></span><span><span>    indicator_name </span><span class="token token" style="color:#67cdcc">=</span><span> </span><span class="token token" style="color:#7ec699">&#x27;Literacy rate, youth total (% of people ages 15-24)&#x27;</span><span>
</span></span><span><span>    </span><span class="token token" style="color:#67cdcc">and</span><span> </span><span class="token token" style="color:#cc99cd">year</span><span> </span><span class="token token" style="color:#67cdcc">&gt;</span><span> </span><span class="token token" style="color:#f08d49">2010</span><span>
</span></span><span><span>  </span><span class="token token" style="color:#cc99cd">group</span><span> </span><span class="token token" style="color:#cc99cd">by</span><span> country_code
</span></span><span><span></span><span class="token token" style="color:#ccc">)</span><span>
</span></span><span><span></span><span class="token token" style="color:#cc99cd">select</span><span> c</span><span class="token token" style="color:#ccc">.</span><span>short_name </span><span class="token token" style="color:#cc99cd">as</span><span> country</span><span class="token token" style="color:#ccc">,</span><span> printf</span><span class="token token" style="color:#ccc">(</span><span class="token token" style="color:#7ec699">&#x27;%.1f %%&#x27;</span><span class="token token" style="color:#ccc">,</span><span> </span><span class="token token" style="color:#cc99cd">value</span><span class="token token" style="color:#ccc">)</span><span> </span><span class="token token" style="color:#cc99cd">as</span><span> </span><span class="token token" style="color:#7ec699">&quot;Youth Literacy Rate&quot;</span><span>
</span></span><span><span></span><span class="token token" style="color:#cc99cd">from</span><span> wdi_data
</span></span><span><span>  </span><span class="token token" style="color:#cc99cd">join</span><span> wdi_country c </span><span class="token token" style="color:#cc99cd">using</span><span> </span><span class="token token" style="color:#ccc">(</span><span>country_code</span><span class="token token" style="color:#ccc">)</span><span>
</span></span><span><span>  </span><span class="token token" style="color:#cc99cd">join</span><span> newest_datapoints </span><span class="token token" style="color:#cc99cd">using</span><span> </span><span class="token token" style="color:#ccc">(</span><span>indicator_code</span><span class="token token" style="color:#ccc">,</span><span> country_code</span><span class="token token" style="color:#ccc">,</span><span> </span><span class="token token" style="color:#cc99cd">year</span><span class="token token" style="color:#ccc">)</span><span>
</span></span><span><span></span><span class="token token" style="color:#cc99cd">order</span><span> </span><span class="token token" style="color:#cc99cd">by</span><span> </span><span class="token token" style="color:#cc99cd">value</span><span> </span><span class="token token" style="color:#cc99cd">asc</span><span> </span><span class="token token" style="color:#cc99cd">limit</span><span> </span><span class="token token" style="color:#f08d49">10</span></span></code></pre></div></div><div class="with-inner-title hanging"><div class="inner-title"><div role="button"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="play" class="svg-inline--fa fa-play fa-sm " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"></path></svg> Run</div></div><div style="padding-bottom:1ex"></div></div></div><p>The above query should do 10-20 GET requests, fetching a total of 130 - 270KiB, depending on if you ran the above demos as well. Note that it only has to do 20 requests and not 270 (as would be expected when fetching 270 KiB with 1 KiB at a time). That’s because I implemented a pre-fetching system that tries to detect access patterns through three separate virtual read heads and exponentially increases the request size for sequential reads. This means that index scans or table scans reading more than a few KiB of data will only cause a number of requests that is logarithmic in the total byte length of the scan. You can see the effect of this by looking at the <span class="quoted">&quot;<!-- -->Access pattern<!-- -->&quot;</span> column in the page read log above.</p><p>All of this only works well when we have indices in the database that match the queries well. For example, the index used in the above query is a <code class="not-highlighted">INDEX ON wdi_data (indicator_code, country_code, year, value)</code>. If that index did not include the value column, the SQLite engine would have to do another random access (unpredictable) read and thus HTTP request to retrieve the actual value for every data point. If the index was ordered <code class="not-highlighted">country_code, indicator_code, ...</code>, then we would be able to quickly get all indicators for a single country, but not all country values of a single indicator.</p><p>We can also make use of the SQLite <a href="https://sqlite.org/fts5.html">FTS</a> module so we can do a full-text search on the more text-heavy information in the database - in this case there are over 1000 human development indicators in the database with longer descriptions.</p><div class="sqlite-httpvfs-demo"><div class="box-title">Demo</div><div class="with-inner-title"><div class="inner-title"><div>Input <!-- -->SQL</div><div role="button" class="floatright"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="keyboard" class="svg-inline--fa fa-keyboard fa-sm " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M64 64C28.7 64 0 92.7 0 128L0 384c0 35.3 28.7 64 64 64l448 0c35.3 0 64-28.7 64-64l0-256c0-35.3-28.7-64-64-64L64 64zm16 64l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM64 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zm80-176c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM160 336c0-8.8 7.2-16 16-16l224 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-224 0c-8.8 0-16-7.2-16-16l0-32zM272 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM256 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM368 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM352 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM464 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM448 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16z"></path></svg> Edit</div></div><div class="inner-body"><pre class="inner-body" style="color:#ccc;background:#2d2d2d;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-sql" style="white-space:pre;color:#ccc;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token token" style="color:#cc99cd">select</span><span> </span><span class="token token" style="color:#67cdcc">*</span><span> </span><span class="token token" style="color:#cc99cd">from</span><span> indicator_search
</span></span><span><span></span><span class="token token" style="color:#cc99cd">where</span><span> indicator_search </span><span class="token token" style="color:#cc99cd">match</span><span> </span><span class="token token" style="color:#7ec699">&#x27;educatio* femal*&#x27;</span><span>
</span></span><span><span></span><span class="token token" style="color:#cc99cd">order</span><span> </span><span class="token token" style="color:#cc99cd">by</span><span> rank </span><span class="token token" style="color:#cc99cd">limit</span><span> </span><span class="token token" style="color:#f08d49">10</span></span></code></pre></div></div><div class="with-inner-title hanging"><div class="inner-title"><div role="button"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="play" class="svg-inline--fa fa-play fa-sm " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"></path></svg> Run</div></div><div style="padding-bottom:1ex"></div></div></div><p>The total amount of data in the <code class="not-highlighted">indicator_search</code> FTS table is around 8 MByte. The above query should only fetch around 70 KiB. You can see how it is constructed <a href="https://github.com/phiresky/world-development-indicators-sqlite/blob/gh-pages/postproc.sh#L15">here</a>.</p><p>And finally, here’s a more complete demonstration of the usefulness of this system - here’s an interactive graph showing the development of a few countries over time, for any countries you want using any indicator from the dataset:</p><div class="sqlite-httpvfs-demo">Countries:<!-- --> <style data-emotion="css b62m3t-container">.css-b62m3t-container{position:relative;box-sizing:border-box;}</style><div class="css-b62m3t-container"><style data-emotion="css 7pg0cj-a11yText">.css-7pg0cj-a11yText{z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap;}</style><span id="react-select-2-live-region" class="css-7pg0cj-a11yText"></span><span aria-live="polite" aria-atomic="false" aria-relevant="additions text" role="log" class="css-7pg0cj-a11yText"></span><style data-emotion="css 13cymwt-control">.css-13cymwt-control{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:default;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;min-height:38px;outline:0!important;position:relative;-webkit-transition:all 100ms;transition:all 100ms;background-color:hsl(0, 0%, 100%);border-color:hsl(0, 0%, 80%);border-radius:4px;border-style:solid;border-width:1px;box-sizing:border-box;}.css-13cymwt-control:hover{border-color:hsl(0, 0%, 70%);}</style><div class="css-13cymwt-control"><style data-emotion="css 1dyz3mf">.css-1dyz3mf{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex:1;-ms-flex:1;flex:1;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-overflow-scrolling:touch;position:relative;overflow:hidden;padding:2px 8px;box-sizing:border-box;}</style><div class="css-1dyz3mf"><style data-emotion="css 1p3m7a8-multiValue">.css-1p3m7a8-multiValue{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-width:0;background-color:hsl(0, 0%, 90%);border-radius:2px;margin:2px;box-sizing:border-box;}</style><div class="css-1p3m7a8-multiValue"><style data-emotion="css 9jq23d">.css-9jq23d{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;border-radius:2px;color:hsl(0, 0%, 20%);font-size:85%;padding:3px;padding-left:6px;box-sizing:border-box;}</style><div class="css-9jq23d">United States</div><style data-emotion="css v7duua">.css-v7duua{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;border-radius:2px;padding-left:4px;padding-right:4px;box-sizing:border-box;}.css-v7duua:hover{background-color:#FFBDAD;color:#DE350B;}</style><div role="button" class="css-v7duua" aria-label="Remove United States"><style data-emotion="css 8mmkcg">.css-8mmkcg{display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0;}</style><svg height="14" width="14" viewBox="0 0 20 20" aria-hidden="true" focusable="false" class="css-8mmkcg"><path d="M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"></path></svg></div></div><div class="css-1p3m7a8-multiValue"><div class="css-9jq23d">Germany</div><div role="button" class="css-v7duua" aria-label="Remove Germany"><svg height="14" width="14" viewBox="0 0 20 20" aria-hidden="true" focusable="false" class="css-8mmkcg"><path d="M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"></path></svg></div></div><div class="css-1p3m7a8-multiValue"><div class="css-9jq23d">India</div><div role="button" class="css-v7duua" aria-label="Remove India"><svg height="14" width="14" viewBox="0 0 20 20" aria-hidden="true" focusable="false" class="css-8mmkcg"><path d="M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"></path></svg></div></div><div class="css-1p3m7a8-multiValue"><div class="css-9jq23d">China</div><div role="button" class="css-v7duua" aria-label="Remove China"><svg height="14" width="14" viewBox="0 0 20 20" aria-hidden="true" focusable="false" class="css-8mmkcg"><path d="M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"></path></svg></div></div><div class="css-1p3m7a8-multiValue"><div class="css-9jq23d">Korea</div><div role="button" class="css-v7duua" aria-label="Remove Korea"><svg height="14" width="14" viewBox="0 0 20 20" aria-hidden="true" focusable="false" class="css-8mmkcg"><path d="M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"></path></svg></div></div><style data-emotion="css 19bb58m">.css-19bb58m{visibility:visible;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;display:inline-grid;grid-area:1/1/2/3;grid-template-columns:0 min-content;margin:2px;padding-bottom:2px;padding-top:2px;color:hsl(0, 0%, 20%);box-sizing:border-box;}.css-19bb58m:after{content:attr(data-value) " ";visibility:hidden;white-space:pre;grid-area:1/2;font:inherit;min-width:2px;border:0;margin:0;outline:0;padding:0;}</style><div class="css-19bb58m" data-value=""><input class="" style="label:input;color:inherit;background:0;opacity:1;width:100%;grid-area:1 / 2;font:inherit;min-width:2px;border:0;margin:0;outline:0;padding:0" autoCapitalize="none" autoComplete="off" autoCorrect="off" id="react-select-2-input" spellcheck="false" tabindex="0" type="text" aria-autocomplete="list" aria-expanded="false" aria-haspopup="true" role="combobox" aria-activedescendant="" value=""/></div></div><style data-emotion="css 1wy0on6">.css-1wy0on6{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-align-self:stretch;-ms-flex-item-align:stretch;align-self:stretch;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;box-sizing:border-box;}</style><div class="css-1wy0on6"><style data-emotion="css pogzpp-loadingIndicator">.css-pogzpp-loadingIndicator{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-transition:color 150ms;transition:color 150ms;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;font-size:4px;line-height:1;margin-right:4px;text-align:center;vertical-align:middle;color:hsl(0, 0%, 80%);padding:8px;box-sizing:border-box;}</style><div class="css-pogzpp-loadingIndicator" aria-hidden="true"><style data-emotion="css 19b349s animation-stj4i2">.css-19b349s{-webkit-animation:animation-stj4i2 1s ease-in-out 0ms infinite;animation:animation-stj4i2 1s ease-in-out 0ms infinite;background-color:currentColor;border-radius:1em;display:inline-block;height:1em;vertical-align:top;width:1em;}@-webkit-keyframes animation-stj4i2{0%,80%,100%{opacity:0;}40%{opacity:1;}}@keyframes animation-stj4i2{0%,80%,100%{opacity:0;}40%{opacity:1;}}</style><span class="css-19b349s"></span><style data-emotion="css 1f06n0c animation-stj4i2">.css-1f06n0c{-webkit-animation:animation-stj4i2 1s ease-in-out 160ms infinite;animation:animation-stj4i2 1s ease-in-out 160ms infinite;background-color:currentColor;border-radius:1em;display:inline-block;margin-left:1em;height:1em;vertical-align:top;width:1em;}@-webkit-keyframes animation-stj4i2{0%,80%,100%{opacity:0;}40%{opacity:1;}}@keyframes animation-stj4i2{0%,80%,100%{opacity:0;}40%{opacity:1;}}</style><span class="css-1f06n0c"></span><style data-emotion="css 1lqdfpi animation-stj4i2">.css-1lqdfpi{-webkit-animation:animation-stj4i2 1s ease-in-out 320ms infinite;animation:animation-stj4i2 1s ease-in-out 320ms infinite;background-color:currentColor;border-radius:1em;display:inline-block;margin-left:1em;height:1em;vertical-align:top;width:1em;}@-webkit-keyframes animation-stj4i2{0%,80%,100%{opacity:0;}40%{opacity:1;}}@keyframes animation-stj4i2{0%,80%,100%{opacity:0;}40%{opacity:1;}}</style><span class="css-1lqdfpi"></span></div><style data-emotion="css 1u9des2-indicatorSeparator">.css-1u9des2-indicatorSeparator{-webkit-align-self:stretch;-ms-flex-item-align:stretch;align-self:stretch;width:1px;background-color:hsl(0, 0%, 80%);margin-bottom:8px;margin-top:8px;box-sizing:border-box;}</style><span class="css-1u9des2-indicatorSeparator"></span><style data-emotion="css 1xc3v61-indicatorContainer">.css-1xc3v61-indicatorContainer{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-transition:color 150ms;transition:color 150ms;color:hsl(0, 0%, 80%);padding:8px;box-sizing:border-box;}.css-1xc3v61-indicatorContainer:hover{color:hsl(0, 0%, 60%);}</style><div class="css-1xc3v61-indicatorContainer" aria-hidden="true"><svg height="20" width="20" viewBox="0 0 20 20" aria-hidden="true" focusable="false" class="css-8mmkcg"><path d="M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"></path></svg></div></div></div></div>Indicator:<!-- --> <style data-emotion="css b62m3t-container">.css-b62m3t-container{position:relative;box-sizing:border-box;}</style><div class="css-b62m3t-container"><style data-emotion="css 7pg0cj-a11yText">.css-7pg0cj-a11yText{z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap;}</style><span id="react-select-3-live-region" class="css-7pg0cj-a11yText"></span><span aria-live="polite" aria-atomic="false" aria-relevant="additions text" role="log" class="css-7pg0cj-a11yText"></span><style data-emotion="css 13cymwt-control">.css-13cymwt-control{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:default;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;min-height:38px;outline:0!important;position:relative;-webkit-transition:all 100ms;transition:all 100ms;background-color:hsl(0, 0%, 100%);border-color:hsl(0, 0%, 80%);border-radius:4px;border-style:solid;border-width:1px;box-sizing:border-box;}.css-13cymwt-control:hover{border-color:hsl(0, 0%, 70%);}</style><div class="css-13cymwt-control"><style data-emotion="css hlgwow">.css-hlgwow{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:grid;-webkit-flex:1;-ms-flex:1;flex:1;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-overflow-scrolling:touch;position:relative;overflow:hidden;padding:2px 8px;box-sizing:border-box;}</style><div class="css-hlgwow"><style data-emotion="css 1dimb5e-singleValue">.css-1dimb5e-singleValue{grid-area:1/1/2/3;max-width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;color:hsl(0, 0%, 20%);margin-left:2px;margin-right:2px;box-sizing:border-box;}</style><div class="css-1dimb5e-singleValue">Individuals using the Internet (% of population)</div><style data-emotion="css 19bb58m">.css-19bb58m{visibility:visible;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;display:inline-grid;grid-area:1/1/2/3;grid-template-columns:0 min-content;margin:2px;padding-bottom:2px;padding-top:2px;color:hsl(0, 0%, 20%);box-sizing:border-box;}.css-19bb58m:after{content:attr(data-value) " ";visibility:hidden;white-space:pre;grid-area:1/2;font:inherit;min-width:2px;border:0;margin:0;outline:0;padding:0;}</style><div class="css-19bb58m" data-value=""><input class="" style="label:input;color:inherit;background:0;opacity:1;width:100%;grid-area:1 / 2;font:inherit;min-width:2px;border:0;margin:0;outline:0;padding:0" autoCapitalize="none" autoComplete="off" autoCorrect="off" id="react-select-3-input" spellcheck="false" tabindex="0" type="text" aria-autocomplete="list" aria-expanded="false" aria-haspopup="true" role="combobox" aria-activedescendant="" value=""/></div></div><style data-emotion="css 1wy0on6">.css-1wy0on6{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-align-self:stretch;-ms-flex-item-align:stretch;align-self:stretch;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;box-sizing:border-box;}</style><div class="css-1wy0on6"><style data-emotion="css pogzpp-loadingIndicator">.css-pogzpp-loadingIndicator{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-transition:color 150ms;transition:color 150ms;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;font-size:4px;line-height:1;margin-right:4px;text-align:center;vertical-align:middle;color:hsl(0, 0%, 80%);padding:8px;box-sizing:border-box;}</style><div class="css-pogzpp-loadingIndicator" aria-hidden="true"><style data-emotion="css 19b349s animation-stj4i2">.css-19b349s{-webkit-animation:animation-stj4i2 1s ease-in-out 0ms infinite;animation:animation-stj4i2 1s ease-in-out 0ms infinite;background-color:currentColor;border-radius:1em;display:inline-block;height:1em;vertical-align:top;width:1em;}@-webkit-keyframes animation-stj4i2{0%,80%,100%{opacity:0;}40%{opacity:1;}}@keyframes animation-stj4i2{0%,80%,100%{opacity:0;}40%{opacity:1;}}</style><span class="css-19b349s"></span><style data-emotion="css 1f06n0c animation-stj4i2">.css-1f06n0c{-webkit-animation:animation-stj4i2 1s ease-in-out 160ms infinite;animation:animation-stj4i2 1s ease-in-out 160ms infinite;background-color:currentColor;border-radius:1em;display:inline-block;margin-left:1em;height:1em;vertical-align:top;width:1em;}@-webkit-keyframes animation-stj4i2{0%,80%,100%{opacity:0;}40%{opacity:1;}}@keyframes animation-stj4i2{0%,80%,100%{opacity:0;}40%{opacity:1;}}</style><span class="css-1f06n0c"></span><style data-emotion="css 1lqdfpi animation-stj4i2">.css-1lqdfpi{-webkit-animation:animation-stj4i2 1s ease-in-out 320ms infinite;animation:animation-stj4i2 1s ease-in-out 320ms infinite;background-color:currentColor;border-radius:1em;display:inline-block;margin-left:1em;height:1em;vertical-align:top;width:1em;}@-webkit-keyframes animation-stj4i2{0%,80%,100%{opacity:0;}40%{opacity:1;}}@keyframes animation-stj4i2{0%,80%,100%{opacity:0;}40%{opacity:1;}}</style><span class="css-1lqdfpi"></span></div><style data-emotion="css 1u9des2-indicatorSeparator">.css-1u9des2-indicatorSeparator{-webkit-align-self:stretch;-ms-flex-item-align:stretch;align-self:stretch;width:1px;background-color:hsl(0, 0%, 80%);margin-bottom:8px;margin-top:8px;box-sizing:border-box;}</style><span class="css-1u9des2-indicatorSeparator"></span><style data-emotion="css 1xc3v61-indicatorContainer">.css-1xc3v61-indicatorContainer{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-transition:color 150ms;transition:color 150ms;color:hsl(0, 0%, 80%);padding:8px;box-sizing:border-box;}.css-1xc3v61-indicatorContainer:hover{color:hsl(0, 0%, 60%);}</style><div class="css-1xc3v61-indicatorContainer" aria-hidden="true"><style data-emotion="css 8mmkcg">.css-8mmkcg{display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0;}</style><svg height="20" width="20" viewBox="0 0 20 20" aria-hidden="true" focusable="false" class="css-8mmkcg"><path d="M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"></path></svg></div></div></div></div><details><summary>Extra information about this indicator</summary><dl class="maxheight"><dt>Indicator Code</dt><dd>IT.NET.USER.ZS</dd><dt>Long definition</dt><dd>Internet users are individuals who have used the Internet (from any location) in the last 3 months. The Internet can be used via a computer, mobile phone, personal digital assistant, games machine, digital TV etc.</dd><dt>Statistical concept and methodology</dt><dd>The Internet is a world-wide public computer network. It provides access to a number of communication services including the World Wide Web and carries email, news, entertainment and data files, irrespective of the device used (not assumed to be only via a computer - it may also be by mobile phone, PDA, games machine, digital TV etc.). Access can be via a fixed or mobile network. For additional/latest information on sources and country notes, please also refer to: https://www.itu.int/en/ITU-D/Statistics/Pages/stat/default.aspx</dd><dt>Development relevance</dt><dd>The digital and information revolution has changed the way the world learns, communicates, does business, and treats illnesses. New information and communications technologies (ICT) offer vast opportunities for progress in all walks of life in all countries - opportunities for economic growth, improved health, better service delivery, learning through distance education, and social and cultural advances.

Today&#x27;s smartphones and tablets have computer power equivalent to that of yesterday&#x27;s computers and provide a similar range of functions. Device convergence is thus rendering the conventional definition obsolete.

Comparable statistics on access, use, quality, and affordability of ICT are needed to formulate growth-enabling policies for the sector and to monitor and evaluate the sector&#x27;s impact on development. Although basic access data are available for many countries, in most developing countries little is known about who uses ICT; what they are used for (school, work, business, research, government); and how they affect people and businesses. The global Partnership on Measuring ICT for Development is helping to set standards, harmonize information and communications technology statistics, and build statistical capacity in developing countries. However, despite significant improvements in the developing world, the gap between the ICT haves and have-nots remains.</dd></dl></details></div><p>Note that many indicators are only available for some countries, for example the indicator <em><span class="quoted">&quot;<!-- -->Women who believe a husband is justified in beating his wife when she burns the food<!-- -->&quot;</span></em> is based on surveys only conducted in lower-developed countries.</p><h2 id="bonus-dom-as-a-database">Bonus: DOM as a database</h2><p>Since we’re already running a database in our browser, why not use our browser as a database using a virtual table called <code class="not-highlighted">dom</code>?</p><div class="sqlite-httpvfs-demo"><div class="box-title">Demo</div><div class="with-inner-title"><div class="inner-title"><div>Input <!-- -->SQL</div><div role="button" class="floatright"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="keyboard" class="svg-inline--fa fa-keyboard fa-sm " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M64 64C28.7 64 0 92.7 0 128L0 384c0 35.3 28.7 64 64 64l448 0c35.3 0 64-28.7 64-64l0-256c0-35.3-28.7-64-64-64L64 64zm16 64l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM64 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zm80-176c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM160 336c0-8.8 7.2-16 16-16l224 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-224 0c-8.8 0-16-7.2-16-16l0-32zM272 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM256 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM368 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM352 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM464 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM448 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16z"></path></svg> Edit</div></div><div class="inner-body"><pre class="inner-body" style="color:#ccc;background:#2d2d2d;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-sql" style="white-space:pre;color:#ccc;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token token" style="color:#cc99cd">select</span><span> </span><span class="token token" style="color:#f08d49">count</span><span class="token token" style="color:#ccc">(</span><span class="token token" style="color:#67cdcc">*</span><span class="token token" style="color:#ccc">)</span><span> </span><span class="token token" style="color:#cc99cd">as</span><span> number_of_demos </span><span class="token token" style="color:#cc99cd">from</span><span> dom
</span></span><span><span>  </span><span class="token token" style="color:#cc99cd">where</span><span> selector </span><span class="token token" style="color:#cc99cd">match</span><span> </span><span class="token token" style="color:#7ec699">&#x27;.content div.sqlite-httpvfs-demo&#x27;</span><span class="token token" style="color:#ccc">;</span><span>
</span></span><span><span></span><span class="token token" style="color:#cc99cd">select</span><span> </span><span class="token token" style="color:#f08d49">count</span><span class="token token" style="color:#ccc">(</span><span class="token token" style="color:#67cdcc">*</span><span class="token token" style="color:#ccc">)</span><span> </span><span class="token token" style="color:#cc99cd">as</span><span> sqlite_mentions </span><span class="token token" style="color:#cc99cd">from</span><span> dom
</span></span><span><span>  </span><span class="token token" style="color:#cc99cd">where</span><span> selector </span><span class="token token" style="color:#cc99cd">match</span><span> </span><span class="token token" style="color:#7ec699">&#x27;.content p&#x27;</span><span> </span><span class="token token" style="color:#67cdcc">and</span><span> textContent </span><span class="token token" style="color:#67cdcc">like</span><span> </span><span class="token token" style="color:#7ec699">&#x27;%SQLite%&#x27;</span><span class="token token" style="color:#ccc">;</span></span></code></pre></div></div><div class="with-inner-title hanging"><div class="inner-title"><div role="button"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="play" class="svg-inline--fa fa-play fa-sm " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"></path></svg> Run</div></div><div style="padding-bottom:1ex"></div></div></div><p>We can even insert elements directly into the DOM:</p><div class="sqlite-httpvfs-demo"><div class="box-title">Demo</div><div class="with-inner-title"><div class="inner-title"><div>Input <!-- -->SQL</div><div role="button" class="floatright"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="keyboard" class="svg-inline--fa fa-keyboard fa-sm " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M64 64C28.7 64 0 92.7 0 128L0 384c0 35.3 28.7 64 64 64l448 0c35.3 0 64-28.7 64-64l0-256c0-35.3-28.7-64-64-64L64 64zm16 64l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM64 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zm80-176c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM160 336c0-8.8 7.2-16 16-16l224 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-224 0c-8.8 0-16-7.2-16-16l0-32zM272 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM256 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM368 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM352 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM464 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM448 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16z"></path></svg> Edit</div></div><div class="inner-body"><pre class="inner-body" style="color:#ccc;background:#2d2d2d;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-sql" style="white-space:pre;color:#ccc;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token token" style="color:#cc99cd">insert</span><span> </span><span class="token token" style="color:#cc99cd">into</span><span> dom </span><span class="token token" style="color:#ccc">(</span><span>parent</span><span class="token token" style="color:#ccc">,</span><span> tagName</span><span class="token token" style="color:#ccc">,</span><span> textContent</span><span class="token token" style="color:#ccc">)</span><span>
</span></span><span><span>    </span><span class="token token" style="color:#cc99cd">select</span><span> </span><span class="token token" style="color:#7ec699">&#x27;ul#outtable1&#x27;</span><span class="token token" style="color:#ccc">,</span><span> </span><span class="token token" style="color:#7ec699">&#x27;li&#x27;</span><span class="token token" style="color:#ccc">,</span><span> short_name
</span></span><span><span>    </span><span class="token token" style="color:#cc99cd">from</span><span> wdi_country </span><span class="token token" style="color:#cc99cd">where</span><span> currency_unit </span><span class="token token" style="color:#67cdcc">=</span><span> </span><span class="token token" style="color:#7ec699">&#x27;Euro&#x27;</span></span></code></pre></div></div><div class="with-inner-title hanging"><div class="inner-title"><div role="button"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="play" class="svg-inline--fa fa-play fa-sm " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"></path></svg> Run</div></div><div style="padding-bottom:1ex"></div></div></div><p>Output:</p><div><ul id="outtable1"></div><div></ul></div><p>And update elements in the DOM:</p><div class="sqlite-httpvfs-demo"><div class="box-title">Demo</div><div class="with-inner-title"><div class="inner-title"><div>Input <!-- -->SQL</div><div role="button" class="floatright"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="keyboard" class="svg-inline--fa fa-keyboard fa-sm " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M64 64C28.7 64 0 92.7 0 128L0 384c0 35.3 28.7 64 64 64l448 0c35.3 0 64-28.7 64-64l0-256c0-35.3-28.7-64-64-64L64 64zm16 64l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM64 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zm80-176c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM160 336c0-8.8 7.2-16 16-16l224 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-224 0c-8.8 0-16-7.2-16-16l0-32zM272 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM256 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM368 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM352 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM464 128l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zM448 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm16 80l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16z"></path></svg> Edit</div></div><div class="inner-body"><pre class="inner-body" style="color:#ccc;background:#2d2d2d;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:1em;margin:.5em 0;overflow:auto"><code class="language-sql" style="white-space:pre;color:#ccc;background:none;font-family:Consolas, Monaco, &#x27;Andale Mono&#x27;, &#x27;Ubuntu Mono&#x27;, monospace;font-size:1em;text-align:left;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span><span class="token token" style="color:#cc99cd">update</span><span> dom </span><span class="token token" style="color:#cc99cd">set</span><span> textContent </span><span class="token token" style="color:#67cdcc">=</span><span>
</span></span><span><span>  get_flag</span><span class="token token" style="color:#ccc">(</span><span class="token token" style="color:#7ec699">&quot;2-alpha_code&quot;</span><span class="token token" style="color:#ccc">)</span><span> </span><span class="token token" style="color:#67cdcc">||</span><span> </span><span class="token token" style="color:#7ec699">&#x27; &#x27;</span><span> </span><span class="token token" style="color:#67cdcc">||</span><span> textContent
</span></span><span><span></span><span class="token token" style="color:#cc99cd">from</span><span> wdi_country
</span></span><span><span></span><span class="token token" style="color:#cc99cd">where</span><span> selector </span><span class="token token" style="color:#cc99cd">match</span><span> </span><span class="token token" style="color:#7ec699">&#x27;ul#outtable1 &gt; li&#x27;</span><span>
</span></span><span><span>  </span><span class="token token" style="color:#67cdcc">and</span><span> textContent </span><span class="token token" style="color:#67cdcc">=</span><span> wdi_country</span><span class="token token" style="color:#ccc">.</span><span>short_name</span></span></code></pre></div></div><div class="with-inner-title hanging"><div class="inner-title"><div role="button"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="play" class="svg-inline--fa fa-play fa-sm " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"></path></svg> Run</div></div><div style="padding-bottom:1ex"></div></div></div><hr/><p>Of course, everything here is open source. The main implementation of the sqlite wrapper is in <a href="https://github.com/phiresky/sql.js-httpvfs">sql.js-httpvfs</a>. The source code of this blog post is <a href="https://github.com/phiresky/blog/blob/master/posts/2021/hosting-sqlite-databases-on-github-pages.md">a pandoc markdown file</a>, with the demos being a <a href="https://github.com/phiresky/blog/tree/master/client/sqlite-httpvfs">custom <span class="quoted">&quot;<!-- -->fenced code block<!-- -->&quot;</span> React component</a>.</p><h2 id="update-2023-future-work">Update 2023: Future Work</h2><p>Since I wrote this article in 2021, a lot of interesting things have happened in this space, many inspired by this proof of concept! Here’s some highlights:</p><ul><li><a href="https://news.ycombinator.com/item?id=28585208">libgen-ipfs</a>: implements a search engine for the <a href="https://en.wikipedia.org/wiki/Library_Genesis">Library Genesis</a> based on IPFS and sql.js-httpvfs.</li><li><a href="https://jlongster.com/future-sql-web">absurd-sql</a>: implements a backend for sql.js (sqlite3 compiled for the web) that treats IndexedDB like a disk and stores data in blocks there. Inspired by this article.</li><li>sqlite itself has now added <a href="https://sqlite.org/wasm/doc/trunk/index.md">official support for wasm</a>, citing absurd-sql as related work!</li></ul></div><footer class="center w5 f6 tc mt4"><p><a href="https://github.com/phiresky/blog/blob/master/posts/2021/hosting-sqlite-databases-on-github-pages.md">View post source on GitHub</a></p></footer><div></div></main></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"filename":"2021/hosting-sqlite-databases-on-github-pages.md","frontmatter":{"csl":"../ieee-with-url.csl","date":"2021-04-17","hidden":false,"references":[],"subtitle":"(or IPFS or any static file hoster)","title":"Hosting SQLite databases on Github Pages","updated":"2023-06-04","url2cite-link-output":"sup"},"preview":"I was writing a tiny website to display statistics of how much sponsored content a Youtube creator has over time when I noticed that I often write a small tool as a website that queries some data from a database and then displays it in a graph, a table, or similar. But if you want to use a","content_ast":[{"t":"Para","c":[{"t":"Str","c":"I was writing "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"a tiny website"}],["https://phiresky.github.io/youtube-sponsorship-stats/?uploader=Adam+Ragusea",""]]},{"t":"Str","c":" to display statistics of how much sponsored content a Youtube creator has over time when I noticed that I often write a small tool as a website that queries some data from a database and then displays it in a graph, a table, or similar. But if you want to use a database, you either need to write a backend (which you then need to host and maintain forever) or download the whole dataset into the browser (which is not so great when the dataset is more than 10MB)."}]},{"t":"Para","c":[{"t":"Str","c":"In the past when I’ve used a backend server for these small side projects at some point some external API goes down or a key expires or I forget about the backend and stop paying for whatever VPS it was on. Then when I revisit it years later, I’m annoyed that it’s gone and curse myself for relying on an external service - or on myself caring over a longer period of time."}]},{"t":"Para","c":[{"t":"Str","c":"Hosting a static website is much easier than a "},{"t":"Quoted","c":[{"t":"DoubleQuote"},[{"t":"Str","c":"real"}]]},{"t":"Str","c":" server - there’s many free and reliable options (like GitHub, GitLab Pages, Netlify, etc), and it scales to basically infinity without any effort."}]},{"t":"Para","c":[{"t":"Str","c":"So I wrote a tool to be able to use a real SQL database in a statically hosted website!"}]},{"t":"Para","c":[{"t":"Str","c":"Here’s a demo using the "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"World Development Indicators dataset"}],["https://github.com/phiresky/world-development-indicators-sqlite/",""]]},{"t":"Str","c":" - a dataset with 6 tables and over 8 million rows (670 MiByte total)."}]},{"t":"CodeBlock","c":[["",["sqlite-httpvfs-demo","autorun","diffstat"],[]],"select country_code, long_name from wdi_country limit 3;"]},{"t":"Para","c":[{"t":"Str","c":"As you can see, we can query the "},{"t":"Code","c":[["",[],[]],"wdi_country"]},{"t":"Str","c":" table while fetching only 1kB of data!"}]},{"t":"Para","c":[{"t":"Str","c":"This is a full SQLite query engine. As such, we can use e.g. the "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"SQLite JSON functions"}],["https://www.sqlite.org/json1.html",""]]},{"t":"Str","c":":"}]},{"t":"CodeBlock","c":[["",["sqlite-httpvfs-demo","autorun"],[]],"select json_extract(arr.value, '$.foo.bar') as bar\n  from json_each('[{\"foo\": {\"bar\": 123}}, {\"foo\": {\"bar\": \"baz\"}}]') as arr"]},{"t":"Para","c":[{"t":"Str","c":"We can also register JS functions so they can be called from within a query. Here’s an example with a "},{"t":"Code","c":[["",[],[]],"getFlag"]},{"t":"Str","c":" function that gets the flag emoji for a country:"}]},{"t":"CodeBlock","c":[["",["sqlite-httpvfs-demo","js","diffstat","logPageReads"],[]],"function getFlag(country_code) {\n  // just some unicode magic\n  return String.fromCodePoint(...Array.from(country_code||\"\")\n    .map(c =\u003e 127397 + c.codePointAt()));\n}\n\nawait db.create_function(\"get_flag\", getFlag)\nreturn await db.query(`\n  select long_name, get_flag(\"2-alpha_code\") as flag from wdi_country\n    where region is not null and currency_unit = 'Euro';\n`)"]},{"t":"Div","c":[["",["flex","items-center","justify-center","ph3","bg-lightest-blue","navy"],[]],[{"t":"Para","c":[{"t":"Span","c":[["",["lh-title"],[]],[{"t":"Str","c":"Press the Run button to run the following demos. You can change the code in any way you like, though if you make a query too broad it "},{"t":"Emph","c":[{"t":"Str","c":"will"}]},{"t":"Str","c":" fetch large amounts of data ;)"}]]}]}]]},{"t":"Para","c":[{"t":"Str","c":"Note that this website is 100% hosted on a static file hoster (GitHub Pages)."}]},{"t":"Para","c":[{"t":"Str","c":"So how do you use a database on a static file hoster? Firstly, SQLite (written in C) is compiled to WebAssembly. SQLite can be compiled with "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"emscripten"}],["https://emscripten.org/",""]]},{"t":"Str","c":" without any modifications, and the "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"sql.js"}],["https://github.com/sql-js/sql.js/",""]]},{"t":"Str","c":" library is a thin JS wrapper around the wasm code."}]},{"t":"Para","c":[{"t":"Str","c":"sql.js only allows you to create and read from databases that are fully in memory though - so I implemented a virtual file system that fetches chunks of the database with HTTP Range requests when SQLite tries to read from the filesystem: "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"sql.js-httpvfs"}],["https://github.com/phiresky/sql.js-httpvfs",""]]},{"t":"Str","c":". From SQLite’s perspective, it just looks like it’s living on a normal computer with an empty filesystem except for a file called "},{"t":"Code","c":[["",[],[]],"/wdi.sqlite3"]},{"t":"Str","c":" that it can read from. Of course it can’t write to this file, but a read-only database is still very useful."}]},{"t":"Para","c":[{"t":"Str","c":"Since fetching data via HTTP has a pretty large overhead, we need to fetch data in chunks and find some balance between the number of requests and the used bandwidth. Thankfully, SQLite already organizes its database in "},{"t":"Quoted","c":[{"t":"DoubleQuote"},[{"t":"Str","c":"pages"}]]},{"t":"Str","c":" with a user-defined "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"page size"}],["https://www.sqlite.org/pgszchng2016.html",""]]},{"t":"Str","c":" (4 KiB by default). I’ve set the page size to 1 KiB for this database."}]},{"t":"Para","c":[{"t":"Str","c":"Here’s an example of a simple index lookup query:"}]},{"t":"CodeBlock","c":[["",["sqlite-httpvfs-demo","diffstat","logPageReads","defaultPageReadTable"],[]],"select indicator_code, long_definition from wdi_series where indicator_name\n    = 'Literacy rate, youth total (% of people ages 15-24)'"]},{"t":"Para","c":[{"t":"Str","c":"Run the above query and look at the page read log. SQLite does 7 page reads for that query."}]},{"t":"BulletList","c":[[{"t":"Plain","c":[{"t":"Str","c":"Three page reads are just some to get some schema information (these are already cached)"}]}],[{"t":"Plain","c":[{"t":"Str","c":"Two page reads are the index lookup in the index "},{"t":"Code","c":[["",[],[]],"on wdi_series (indicator_name)"]}]}],[{"t":"Plain","c":[{"t":"Str","c":"Two page reads are on the "},{"t":"Code","c":[["",[],[]],"wdi_series"]},{"t":"Str","c":" table data (the first to find the row value by primary key, the second to get the text data from an "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"overflow page"}],["https://www.sqlite.org/fileformat2.html#ovflpgs",""]]},{"t":"Str","c":")"}]}]]},{"t":"Para","c":[{"t":"Str","c":"Both the index as well as the table reads are B-Tree lookups."}]},{"t":"Para","c":[{"t":"Str","c":"A more complex query: What are the countries with the lowest youth literacy rate, based on the newest data from after 2010?"}]},{"t":"CodeBlock","c":[["",["sqlite-httpvfs-demo","diffstat","logPageReads"],[]],"with newest_datapoints as (\n  select country_code, indicator_code, max(year) as year from wdi_data\n  join wdi_series using (indicator_code)\n  where\n    indicator_name = 'Literacy rate, youth total (% of people ages 15-24)'\n    and year \u003e 2010\n  group by country_code\n)\nselect c.short_name as country, printf('%.1f %%', value) as \"Youth Literacy Rate\"\nfrom wdi_data\n  join wdi_country c using (country_code)\n  join newest_datapoints using (indicator_code, country_code, year)\norder by value asc limit 10"]},{"t":"Para","c":[{"t":"Str","c":"The above query should do 10-20 GET requests, fetching a total of 130 - 270KiB, depending on if you ran the above demos as well. Note that it only has to do 20 requests and not 270 (as would be expected when fetching 270 KiB with 1 KiB at a time). That’s because I implemented a pre-fetching system that tries to detect access patterns through three separate virtual read heads and exponentially increases the request size for sequential reads. This means that index scans or table scans reading more than a few KiB of data will only cause a number of requests that is logarithmic in the total byte length of the scan. You can see the effect of this by looking at the "},{"t":"Quoted","c":[{"t":"DoubleQuote"},[{"t":"Str","c":"Access pattern"}]]},{"t":"Str","c":" column in the page read log above."}]},{"t":"Para","c":[{"t":"Str","c":"All of this only works well when we have indices in the database that match the queries well. For example, the index used in the above query is a "},{"t":"Code","c":[["",[],[]],"INDEX ON wdi_data (indicator_code, country_code, year, value)"]},{"t":"Str","c":". If that index did not include the value column, the SQLite engine would have to do another random access (unpredictable) read and thus HTTP request to retrieve the actual value for every data point. If the index was ordered "},{"t":"Code","c":[["",[],[]],"country_code, indicator_code, ..."]},{"t":"Str","c":", then we would be able to quickly get all indicators for a single country, but not all country values of a single indicator."}]},{"t":"Para","c":[{"t":"Str","c":"We can also make use of the SQLite "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"FTS"}],["https://sqlite.org/fts5.html",""]]},{"t":"Str","c":" module so we can do a full-text search on the more text-heavy information in the database - in this case there are over 1000 human development indicators in the database with longer descriptions."}]},{"t":"CodeBlock","c":[["",["sqlite-httpvfs-demo","diffstat","logPageReads"],[]],"select * from indicator_search\nwhere indicator_search match 'educatio* femal*'\norder by rank limit 10"]},{"t":"Para","c":[{"t":"Str","c":"The total amount of data in the "},{"t":"Code","c":[["",[],[]],"indicator_search"]},{"t":"Str","c":" FTS table is around 8 MByte. The above query should only fetch around 70 KiB. You can see how it is constructed "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"here"}],["https://github.com/phiresky/world-development-indicators-sqlite/blob/gh-pages/postproc.sh#L15",""]]},{"t":"Str","c":"."}]},{"t":"Para","c":[{"t":"Str","c":"And finally, here’s a more complete demonstration of the usefulness of this system - here’s an interactive graph showing the development of a few countries over time, for any countries you want using any indicator from the dataset:"}]},{"t":"CodeBlock","c":[["",["sqlite-httpvfs-demo","ftsDemo"],[]],"[this will insert the FtsDemo.tsx component]"]},{"t":"Para","c":[{"t":"Str","c":"Note that many indicators are only available for some countries, for example the indicator "},{"t":"Emph","c":[{"t":"Quoted","c":[{"t":"DoubleQuote"},[{"t":"Str","c":"Women who believe a husband is justified in beating his wife when she burns the food"}]]}]},{"t":"Str","c":" is based on surveys only conducted in lower-developed countries."}]},{"t":"Header","c":[2,["bonus-dom-as-a-database",[],[]],[{"t":"Str","c":"Bonus: DOM as a database"}]]},{"t":"Para","c":[{"t":"Str","c":"Since we’re already running a database in our browser, why not use our browser as a database using a virtual table called "},{"t":"Code","c":[["",[],[]],"dom"]},{"t":"Str","c":"?"}]},{"t":"CodeBlock","c":[["",["sqlite-httpvfs-demo"],[]],"select count(*) as number_of_demos from dom\n  where selector match '.content div.sqlite-httpvfs-demo';\nselect count(*) as sqlite_mentions from dom\n  where selector match '.content p' and textContent like '%SQLite%';"]},{"t":"Para","c":[{"t":"Str","c":"We can even insert elements directly into the DOM:"}]},{"t":"CodeBlock","c":[["",["sqlite-httpvfs-demo"],[]],"insert into dom (parent, tagName, textContent)\n    select 'ul#outtable1', 'li', short_name\n    from wdi_country where currency_unit = 'Euro'"]},{"t":"Para","c":[{"t":"Str","c":"Output:"}]},{"t":"RawBlock","c":["html","\u003cul id=\"outtable1\"\u003e"]},{"t":"RawBlock","c":["html","\u003c/ul\u003e"]},{"t":"Para","c":[{"t":"Str","c":"And update elements in the DOM:"}]},{"t":"CodeBlock","c":[["",["sqlite-httpvfs-demo"],[]],"update dom set textContent =\n  get_flag(\"2-alpha_code\") || ' ' || textContent\nfrom wdi_country\nwhere selector match 'ul#outtable1 \u003e li'\n  and textContent = wdi_country.short_name"]},{"t":"HorizontalRule"},{"t":"Para","c":[{"t":"Str","c":"Of course, everything here is open source. The main implementation of the sqlite wrapper is in "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"sql.js-httpvfs"}],["https://github.com/phiresky/sql.js-httpvfs",""]]},{"t":"Str","c":". The source code of this blog post is "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"a pandoc markdown file"}],["https://github.com/phiresky/blog/blob/master/posts/2021/hosting-sqlite-databases-on-github-pages.md",""]]},{"t":"Str","c":", with the demos being a "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"custom "},{"t":"Quoted","c":[{"t":"DoubleQuote"},[{"t":"Str","c":"fenced code block"}]]},{"t":"Str","c":" React component"}],["https://github.com/phiresky/blog/tree/master/client/sqlite-httpvfs",""]]},{"t":"Str","c":"."}]},{"t":"Header","c":[2,["update-2023-future-work",[],[]],[{"t":"Str","c":"Update 2023: Future Work"}]]},{"t":"Para","c":[{"t":"Str","c":"Since I wrote this article in 2021, a lot of interesting things have happened in this space, many inspired by this proof of concept! Here’s some highlights:"}]},{"t":"BulletList","c":[[{"t":"Plain","c":[{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"libgen-ipfs"}],["https://news.ycombinator.com/item?id=28585208",""]]},{"t":"Str","c":": implements a search engine for the "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"Library Genesis"}],["https://en.wikipedia.org/wiki/Library_Genesis",""]]},{"t":"Str","c":" based on IPFS and sql.js-httpvfs."}]}],[{"t":"Plain","c":[{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"absurd-sql"}],["https://jlongster.com/future-sql-web",""]]},{"t":"Str","c":": implements a backend for sql.js (sqlite3 compiled for the web) that treats IndexedDB like a disk and stores data in blocks there. Inspired by this article."}]}],[{"t":"Plain","c":[{"t":"Str","c":"sqlite itself has now added "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"official support for wasm"}],["https://sqlite.org/wasm/doc/trunk/index.md",""]]},{"t":"Str","c":", citing absurd-sql as related work!"}]}]]}],"default":{"filename":"2021/hosting-sqlite-databases-on-github-pages.md","frontmatter":{"csl":"../ieee-with-url.csl","date":"2021-04-17","hidden":false,"references":[],"subtitle":"(or IPFS or any static file hoster)","title":"Hosting SQLite databases on Github Pages","updated":"2023-06-04","url2cite-link-output":"sup"},"preview":"I was writing a tiny website to display statistics of how much sponsored content a Youtube creator has over time when I noticed that I often write a small tool as a website that queries some data from a database and then displays it in a graph, a table, or similar. But if you want to use a","content_ast":[{"t":"Para","c":[{"t":"Str","c":"I was writing "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"a tiny website"}],["https://phiresky.github.io/youtube-sponsorship-stats/?uploader=Adam+Ragusea",""]]},{"t":"Str","c":" to display statistics of how much sponsored content a Youtube creator has over time when I noticed that I often write a small tool as a website that queries some data from a database and then displays it in a graph, a table, or similar. But if you want to use a database, you either need to write a backend (which you then need to host and maintain forever) or download the whole dataset into the browser (which is not so great when the dataset is more than 10MB)."}]},{"t":"Para","c":[{"t":"Str","c":"In the past when I’ve used a backend server for these small side projects at some point some external API goes down or a key expires or I forget about the backend and stop paying for whatever VPS it was on. Then when I revisit it years later, I’m annoyed that it’s gone and curse myself for relying on an external service - or on myself caring over a longer period of time."}]},{"t":"Para","c":[{"t":"Str","c":"Hosting a static website is much easier than a "},{"t":"Quoted","c":[{"t":"DoubleQuote"},[{"t":"Str","c":"real"}]]},{"t":"Str","c":" server - there’s many free and reliable options (like GitHub, GitLab Pages, Netlify, etc), and it scales to basically infinity without any effort."}]},{"t":"Para","c":[{"t":"Str","c":"So I wrote a tool to be able to use a real SQL database in a statically hosted website!"}]},{"t":"Para","c":[{"t":"Str","c":"Here’s a demo using the "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"World Development Indicators dataset"}],["https://github.com/phiresky/world-development-indicators-sqlite/",""]]},{"t":"Str","c":" - a dataset with 6 tables and over 8 million rows (670 MiByte total)."}]},{"t":"CodeBlock","c":[["",["sqlite-httpvfs-demo","autorun","diffstat"],[]],"select country_code, long_name from wdi_country limit 3;"]},{"t":"Para","c":[{"t":"Str","c":"As you can see, we can query the "},{"t":"Code","c":[["",[],[]],"wdi_country"]},{"t":"Str","c":" table while fetching only 1kB of data!"}]},{"t":"Para","c":[{"t":"Str","c":"This is a full SQLite query engine. As such, we can use e.g. the "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"SQLite JSON functions"}],["https://www.sqlite.org/json1.html",""]]},{"t":"Str","c":":"}]},{"t":"CodeBlock","c":[["",["sqlite-httpvfs-demo","autorun"],[]],"select json_extract(arr.value, '$.foo.bar') as bar\n  from json_each('[{\"foo\": {\"bar\": 123}}, {\"foo\": {\"bar\": \"baz\"}}]') as arr"]},{"t":"Para","c":[{"t":"Str","c":"We can also register JS functions so they can be called from within a query. Here’s an example with a "},{"t":"Code","c":[["",[],[]],"getFlag"]},{"t":"Str","c":" function that gets the flag emoji for a country:"}]},{"t":"CodeBlock","c":[["",["sqlite-httpvfs-demo","js","diffstat","logPageReads"],[]],"function getFlag(country_code) {\n  // just some unicode magic\n  return String.fromCodePoint(...Array.from(country_code||\"\")\n    .map(c =\u003e 127397 + c.codePointAt()));\n}\n\nawait db.create_function(\"get_flag\", getFlag)\nreturn await db.query(`\n  select long_name, get_flag(\"2-alpha_code\") as flag from wdi_country\n    where region is not null and currency_unit = 'Euro';\n`)"]},{"t":"Div","c":[["",["flex","items-center","justify-center","ph3","bg-lightest-blue","navy"],[]],[{"t":"Para","c":[{"t":"Span","c":[["",["lh-title"],[]],[{"t":"Str","c":"Press the Run button to run the following demos. You can change the code in any way you like, though if you make a query too broad it "},{"t":"Emph","c":[{"t":"Str","c":"will"}]},{"t":"Str","c":" fetch large amounts of data ;)"}]]}]}]]},{"t":"Para","c":[{"t":"Str","c":"Note that this website is 100% hosted on a static file hoster (GitHub Pages)."}]},{"t":"Para","c":[{"t":"Str","c":"So how do you use a database on a static file hoster? Firstly, SQLite (written in C) is compiled to WebAssembly. SQLite can be compiled with "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"emscripten"}],["https://emscripten.org/",""]]},{"t":"Str","c":" without any modifications, and the "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"sql.js"}],["https://github.com/sql-js/sql.js/",""]]},{"t":"Str","c":" library is a thin JS wrapper around the wasm code."}]},{"t":"Para","c":[{"t":"Str","c":"sql.js only allows you to create and read from databases that are fully in memory though - so I implemented a virtual file system that fetches chunks of the database with HTTP Range requests when SQLite tries to read from the filesystem: "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"sql.js-httpvfs"}],["https://github.com/phiresky/sql.js-httpvfs",""]]},{"t":"Str","c":". From SQLite’s perspective, it just looks like it’s living on a normal computer with an empty filesystem except for a file called "},{"t":"Code","c":[["",[],[]],"/wdi.sqlite3"]},{"t":"Str","c":" that it can read from. Of course it can’t write to this file, but a read-only database is still very useful."}]},{"t":"Para","c":[{"t":"Str","c":"Since fetching data via HTTP has a pretty large overhead, we need to fetch data in chunks and find some balance between the number of requests and the used bandwidth. Thankfully, SQLite already organizes its database in "},{"t":"Quoted","c":[{"t":"DoubleQuote"},[{"t":"Str","c":"pages"}]]},{"t":"Str","c":" with a user-defined "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"page size"}],["https://www.sqlite.org/pgszchng2016.html",""]]},{"t":"Str","c":" (4 KiB by default). I’ve set the page size to 1 KiB for this database."}]},{"t":"Para","c":[{"t":"Str","c":"Here’s an example of a simple index lookup query:"}]},{"t":"CodeBlock","c":[["",["sqlite-httpvfs-demo","diffstat","logPageReads","defaultPageReadTable"],[]],"select indicator_code, long_definition from wdi_series where indicator_name\n    = 'Literacy rate, youth total (% of people ages 15-24)'"]},{"t":"Para","c":[{"t":"Str","c":"Run the above query and look at the page read log. SQLite does 7 page reads for that query."}]},{"t":"BulletList","c":[[{"t":"Plain","c":[{"t":"Str","c":"Three page reads are just some to get some schema information (these are already cached)"}]}],[{"t":"Plain","c":[{"t":"Str","c":"Two page reads are the index lookup in the index "},{"t":"Code","c":[["",[],[]],"on wdi_series (indicator_name)"]}]}],[{"t":"Plain","c":[{"t":"Str","c":"Two page reads are on the "},{"t":"Code","c":[["",[],[]],"wdi_series"]},{"t":"Str","c":" table data (the first to find the row value by primary key, the second to get the text data from an "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"overflow page"}],["https://www.sqlite.org/fileformat2.html#ovflpgs",""]]},{"t":"Str","c":")"}]}]]},{"t":"Para","c":[{"t":"Str","c":"Both the index as well as the table reads are B-Tree lookups."}]},{"t":"Para","c":[{"t":"Str","c":"A more complex query: What are the countries with the lowest youth literacy rate, based on the newest data from after 2010?"}]},{"t":"CodeBlock","c":[["",["sqlite-httpvfs-demo","diffstat","logPageReads"],[]],"with newest_datapoints as (\n  select country_code, indicator_code, max(year) as year from wdi_data\n  join wdi_series using (indicator_code)\n  where\n    indicator_name = 'Literacy rate, youth total (% of people ages 15-24)'\n    and year \u003e 2010\n  group by country_code\n)\nselect c.short_name as country, printf('%.1f %%', value) as \"Youth Literacy Rate\"\nfrom wdi_data\n  join wdi_country c using (country_code)\n  join newest_datapoints using (indicator_code, country_code, year)\norder by value asc limit 10"]},{"t":"Para","c":[{"t":"Str","c":"The above query should do 10-20 GET requests, fetching a total of 130 - 270KiB, depending on if you ran the above demos as well. Note that it only has to do 20 requests and not 270 (as would be expected when fetching 270 KiB with 1 KiB at a time). That’s because I implemented a pre-fetching system that tries to detect access patterns through three separate virtual read heads and exponentially increases the request size for sequential reads. This means that index scans or table scans reading more than a few KiB of data will only cause a number of requests that is logarithmic in the total byte length of the scan. You can see the effect of this by looking at the "},{"t":"Quoted","c":[{"t":"DoubleQuote"},[{"t":"Str","c":"Access pattern"}]]},{"t":"Str","c":" column in the page read log above."}]},{"t":"Para","c":[{"t":"Str","c":"All of this only works well when we have indices in the database that match the queries well. For example, the index used in the above query is a "},{"t":"Code","c":[["",[],[]],"INDEX ON wdi_data (indicator_code, country_code, year, value)"]},{"t":"Str","c":". If that index did not include the value column, the SQLite engine would have to do another random access (unpredictable) read and thus HTTP request to retrieve the actual value for every data point. If the index was ordered "},{"t":"Code","c":[["",[],[]],"country_code, indicator_code, ..."]},{"t":"Str","c":", then we would be able to quickly get all indicators for a single country, but not all country values of a single indicator."}]},{"t":"Para","c":[{"t":"Str","c":"We can also make use of the SQLite "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"FTS"}],["https://sqlite.org/fts5.html",""]]},{"t":"Str","c":" module so we can do a full-text search on the more text-heavy information in the database - in this case there are over 1000 human development indicators in the database with longer descriptions."}]},{"t":"CodeBlock","c":[["",["sqlite-httpvfs-demo","diffstat","logPageReads"],[]],"select * from indicator_search\nwhere indicator_search match 'educatio* femal*'\norder by rank limit 10"]},{"t":"Para","c":[{"t":"Str","c":"The total amount of data in the "},{"t":"Code","c":[["",[],[]],"indicator_search"]},{"t":"Str","c":" FTS table is around 8 MByte. The above query should only fetch around 70 KiB. You can see how it is constructed "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"here"}],["https://github.com/phiresky/world-development-indicators-sqlite/blob/gh-pages/postproc.sh#L15",""]]},{"t":"Str","c":"."}]},{"t":"Para","c":[{"t":"Str","c":"And finally, here’s a more complete demonstration of the usefulness of this system - here’s an interactive graph showing the development of a few countries over time, for any countries you want using any indicator from the dataset:"}]},{"t":"CodeBlock","c":[["",["sqlite-httpvfs-demo","ftsDemo"],[]],"[this will insert the FtsDemo.tsx component]"]},{"t":"Para","c":[{"t":"Str","c":"Note that many indicators are only available for some countries, for example the indicator "},{"t":"Emph","c":[{"t":"Quoted","c":[{"t":"DoubleQuote"},[{"t":"Str","c":"Women who believe a husband is justified in beating his wife when she burns the food"}]]}]},{"t":"Str","c":" is based on surveys only conducted in lower-developed countries."}]},{"t":"Header","c":[2,["bonus-dom-as-a-database",[],[]],[{"t":"Str","c":"Bonus: DOM as a database"}]]},{"t":"Para","c":[{"t":"Str","c":"Since we’re already running a database in our browser, why not use our browser as a database using a virtual table called "},{"t":"Code","c":[["",[],[]],"dom"]},{"t":"Str","c":"?"}]},{"t":"CodeBlock","c":[["",["sqlite-httpvfs-demo"],[]],"select count(*) as number_of_demos from dom\n  where selector match '.content div.sqlite-httpvfs-demo';\nselect count(*) as sqlite_mentions from dom\n  where selector match '.content p' and textContent like '%SQLite%';"]},{"t":"Para","c":[{"t":"Str","c":"We can even insert elements directly into the DOM:"}]},{"t":"CodeBlock","c":[["",["sqlite-httpvfs-demo"],[]],"insert into dom (parent, tagName, textContent)\n    select 'ul#outtable1', 'li', short_name\n    from wdi_country where currency_unit = 'Euro'"]},{"t":"Para","c":[{"t":"Str","c":"Output:"}]},{"t":"RawBlock","c":["html","\u003cul id=\"outtable1\"\u003e"]},{"t":"RawBlock","c":["html","\u003c/ul\u003e"]},{"t":"Para","c":[{"t":"Str","c":"And update elements in the DOM:"}]},{"t":"CodeBlock","c":[["",["sqlite-httpvfs-demo"],[]],"update dom set textContent =\n  get_flag(\"2-alpha_code\") || ' ' || textContent\nfrom wdi_country\nwhere selector match 'ul#outtable1 \u003e li'\n  and textContent = wdi_country.short_name"]},{"t":"HorizontalRule"},{"t":"Para","c":[{"t":"Str","c":"Of course, everything here is open source. The main implementation of the sqlite wrapper is in "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"sql.js-httpvfs"}],["https://github.com/phiresky/sql.js-httpvfs",""]]},{"t":"Str","c":". The source code of this blog post is "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"a pandoc markdown file"}],["https://github.com/phiresky/blog/blob/master/posts/2021/hosting-sqlite-databases-on-github-pages.md",""]]},{"t":"Str","c":", with the demos being a "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"custom "},{"t":"Quoted","c":[{"t":"DoubleQuote"},[{"t":"Str","c":"fenced code block"}]]},{"t":"Str","c":" React component"}],["https://github.com/phiresky/blog/tree/master/client/sqlite-httpvfs",""]]},{"t":"Str","c":"."}]},{"t":"Header","c":[2,["update-2023-future-work",[],[]],[{"t":"Str","c":"Update 2023: Future Work"}]]},{"t":"Para","c":[{"t":"Str","c":"Since I wrote this article in 2021, a lot of interesting things have happened in this space, many inspired by this proof of concept! Here’s some highlights:"}]},{"t":"BulletList","c":[[{"t":"Plain","c":[{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"libgen-ipfs"}],["https://news.ycombinator.com/item?id=28585208",""]]},{"t":"Str","c":": implements a search engine for the "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"Library Genesis"}],["https://en.wikipedia.org/wiki/Library_Genesis",""]]},{"t":"Str","c":" based on IPFS and sql.js-httpvfs."}]}],[{"t":"Plain","c":[{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"absurd-sql"}],["https://jlongster.com/future-sql-web",""]]},{"t":"Str","c":": implements a backend for sql.js (sqlite3 compiled for the web) that treats IndexedDB like a disk and stores data in blocks there. Inspired by this article."}]}],[{"t":"Plain","c":[{"t":"Str","c":"sqlite itself has now added "},{"t":"Link","c":[["",[],[]],[{"t":"Str","c":"official support for wasm"}],["https://sqlite.org/wasm/doc/trunk/index.md",""]]},{"t":"Str","c":", citing absurd-sql as related work!"}]}]]}]}}},"__N_SSG":true},"page":"/[year]/[post]","query":{"year":"2021","post":"hosting-sqlite-databases-on-github-pages"},"buildId":"1duOVj8IRBQqX-jGqm5oV","assetPrefix":"/blog","isFallback":false,"dynamicIds":[9615],"gsp":true,"scriptLoader":[]}</script></body></html>